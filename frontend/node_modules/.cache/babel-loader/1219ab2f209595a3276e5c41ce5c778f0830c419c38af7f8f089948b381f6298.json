{"ast":null,"code":"// services/api.js\n\n/**\r\n * Enhanced API Service for Best Books Cafe\r\n * Supports both mock data and real backend with smooth switching\r\n */\n\n// Configuration\nconst API_CONFIG = {\n  BASE_URL: process.env.REACT_APP_API_URL || 'http://localhost:5000/api',\n  USE_MOCK_DATA: process.env.REACT_APP_USE_MOCK_DATA === 'true' || process.env.NODE_ENV === 'development',\n  DEFAULT_DELAY: 500,\n  TIMEOUT: 10000\n};\n\n// Error types\nconst ERROR_CODES = {\n  NETWORK_ERROR: 'NETWORK_ERROR',\n  VALIDATION_ERROR: 'VALIDATION_ERROR',\n  NOT_FOUND: 'NOT_FOUND',\n  CONFLICT: 'CONFLICT',\n  SERVER_ERROR: 'SERVER_ERROR',\n  TIMEOUT: 'TIMEOUT'\n};\n\n// Custom API Error class\nclass ApiError extends Error {\n  constructor(message, code = ERROR_CODES.SERVER_ERROR, details = null) {\n    super(message);\n    this.name = 'ApiError';\n    this.code = code;\n    this.details = details;\n    this.timestamp = new Date().toISOString();\n  }\n}\n\n// Enhanced mock data\nconst mockData = {\n  menuItems: [{\n    id: '1',\n    name: 'Эспрессо',\n    description: 'Классический крепкий кофе из отборных арабских зерен',\n    price: 180,\n    category: 'coffee',\n    isBestseller: true,\n    allergens: 'кофеин',\n    imageUrl: '/images/coffee/espresso.jpg',\n    nutritionalInfo: {\n      calories: 5,\n      protein: 0,\n      carbs: 1,\n      fat: 0\n    },\n    available: true\n  }, {\n    id: '2',\n    name: 'Капучино',\n    description: 'Нежный кофе с молочной пенкой и рисунком на поверхности',\n    price: 220,\n    category: 'coffee',\n    isBestseller: true,\n    imageUrl: '/images/coffee/cappuccino.jpg',\n    nutritionalInfo: {\n      calories: 120,\n      protein: 8,\n      carbs: 12,\n      fat: 4\n    },\n    available: true\n  }, {\n    id: '3',\n    name: 'Латте с сиропом',\n    description: 'Кофе с молоком и выбором сиропа (ваниль, карамель, клен)',\n    price: 250,\n    category: 'coffee',\n    imageUrl: '/images/coffee/latte.jpg',\n    nutritionalInfo: {\n      calories: 180,\n      protein: 9,\n      carbs: 25,\n      fat: 6\n    },\n    available: true\n  }, {\n    id: '4',\n    name: 'Американо',\n    description: 'Черный кофе с добавлением горячей воды',\n    price: 160,\n    category: 'coffee',\n    imageUrl: '/images/coffee/americano.jpg',\n    nutritionalInfo: {\n      calories: 10,\n      protein: 0,\n      carbs: 2,\n      fat: 0\n    },\n    available: true\n  }, {\n    id: '5',\n    name: 'Раф кофе',\n    description: 'Нежный кофейный напиток со сливками и ванилью',\n    price: 280,\n    category: 'coffee',\n    isBestseller: true,\n    imageUrl: '/images/coffee/raf.jpg',\n    nutritionalInfo: {\n      calories: 210,\n      protein: 4,\n      carbs: 18,\n      fat: 14\n    },\n    available: true\n  }, {\n    id: '6',\n    name: 'Тирамису',\n    description: 'Классический итальянский десерт с кофейной пропиткой',\n    price: 280,\n    category: 'desserts',\n    isBestseller: true,\n    allergens: 'глютен, лактоза',\n    imageUrl: '/images/desserts/tiramisu.jpg',\n    nutritionalInfo: {\n      calories: 320,\n      protein: 8,\n      carbs: 45,\n      fat: 12\n    },\n    available: true\n  }, {\n    id: '7',\n    name: 'Чизкейк Нью-Йорк',\n    description: 'Нежный чизкейк с ягодным соусом',\n    price: 260,\n    category: 'desserts',\n    imageUrl: '/images/desserts/cheesecake.jpg',\n    nutritionalInfo: {\n      calories: 380,\n      protein: 9,\n      carbs: 35,\n      fat: 22\n    },\n    available: true\n  }, {\n    id: '8',\n    name: 'Веганский брауни',\n    description: 'Шоколадный брауни без продуктов животного происхождения',\n    price: 200,\n    category: 'desserts',\n    isVegan: true,\n    imageUrl: '/images/desserts/brownie.jpg',\n    nutritionalInfo: {\n      calories: 280,\n      protein: 4,\n      carbs: 38,\n      fat: 12\n    },\n    available: true\n  }, {\n    id: '9',\n    name: 'Морковный торт',\n    description: 'Пряный торт с морковью и грецкими орехами',\n    price: 240,\n    category: 'desserts',\n    imageUrl: '/images/desserts/carrot-cake.jpg',\n    nutritionalInfo: {\n      calories: 310,\n      protein: 5,\n      carbs: 42,\n      fat: 14\n    },\n    available: true\n  }, {\n    id: '10',\n    name: 'Английский завтрак',\n    description: 'Яичница, бекон, фасоль, грибы и тосты',\n    price: 350,\n    category: 'breakfast',\n    allergens: 'глютен, лактоза, яйца',\n    imageUrl: '/images/breakfast/english.jpg',\n    nutritionalInfo: {\n      calories: 520,\n      protein: 25,\n      carbs: 45,\n      fat: 28\n    },\n    available: true\n  }, {\n    id: '11',\n    name: 'Сырники',\n    description: 'Домашние сырники со сметаной и ягодным джемом',\n    price: 280,\n    category: 'breakfast',\n    isBestseller: true,\n    imageUrl: '/images/breakfast/syrniki.jpg',\n    nutritionalInfo: {\n      calories: 380,\n      protein: 18,\n      carbs: 35,\n      fat: 16\n    },\n    available: true\n  }, {\n    id: '12',\n    name: 'Овсяная каша',\n    description: 'Каша с ягодами, орехами и медом',\n    price: 220,\n    category: 'breakfast',\n    isVegan: true,\n    imageUrl: '/images/breakfast/oatmeal.jpg',\n    nutritionalInfo: {\n      calories: 280,\n      protein: 8,\n      carbs: 45,\n      fat: 9\n    },\n    available: true\n  }, {\n    id: '13',\n    name: '1984',\n    description: 'Джордж Оруэлл - антиутопия о тоталитарном обществе',\n    price: 450,\n    category: 'books',\n    author: 'Джордж Оруэлл',\n    isBestseller: true,\n    imageUrl: '/images/books/1984.jpg',\n    available: true\n  }, {\n    id: '14',\n    name: 'Мастер и Маргарита',\n    description: 'Михаил Булгаков - мистический роман о добре и зле',\n    price: 420,\n    category: 'books',\n    author: 'Михаил Булгаков',\n    isBestseller: true,\n    imageUrl: '/images/books/master-margarita.jpg',\n    available: true\n  }, {\n    id: '15',\n    name: 'Маленький принц',\n    description: 'Антуан де Сент-Экзюпери - философская сказка для взрослых и детей',\n    price: 380,\n    category: 'books',\n    author: 'Антуан де Сент-Экзюпери',\n    imageUrl: '/images/books/little-prince.jpg',\n    available: true\n  }, {\n    id: '16',\n    name: 'Преступление и наказание',\n    description: 'Федор Достоевский - психологический роман о преступлении и морали',\n    price: 400,\n    category: 'books',\n    author: 'Федор Достоевский',\n    imageUrl: '/images/books/crime-punishment.jpg',\n    available: true\n  }],\n  events: [{\n    id: '1',\n    title: 'Творческое занятие «Создание книжного амулета»',\n    description: 'Создать оригинальный оберег из бумаги своими руками',\n    date: '2024-11-04',\n    displayDate: '4 ноября',\n    time: '12:00',\n    maxParticipants: 30,\n    registeredUsers: [{\n      name: 'Анна',\n      email: 'anna@mail.com',\n      phone: '+79991234567',\n      registeredAt: '2024-10-20'\n    }, {\n      name: 'Иван',\n      email: 'ivan@mail.com',\n      phone: '+79991234568',\n      registeredAt: '2024-10-21'\n    }],\n    location: 'Кофейня \"Кофейный дом\"',\n    price: 0,\n    imageUrl: '/images/events/poetry-evening.jpg',\n    tags: ['творчество', 'рукоделие', 'бесплатно'],\n    status: 'upcoming'\n  }, {\n    id: '2',\n    title: '«Рисуем осеннюю историю»',\n    description: 'Участникам предоставляется материал для творчества',\n    date: '2024-11-06',\n    displayDate: '6 ноября',\n    time: '16:00',\n    maxParticipants: 15,\n    registeredUsers: [{\n      name: 'Мария',\n      email: 'maria@mail.com',\n      phone: '+79991234569',\n      registeredAt: '2024-10-22'\n    }],\n    location: 'Кофейня \"Кофейный дом\"',\n    price: 500,\n    imageUrl: '/images/events/latte-art.jpg',\n    tags: ['рисование', 'творчество'],\n    status: 'upcoming'\n  }, {\n    id: '3',\n    title: 'Мастер-класс «Волшебная шкатулка художника»',\n    description: 'Изготовление оригинальной шкатулки для хранения творческих сокровищ',\n    date: '2024-11-07',\n    displayDate: '7 ноября',\n    time: '14:00',\n    maxParticipants: 20,\n    registeredUsers: [{\n      name: 'Петр',\n      email: 'petr@mail.com',\n      phone: '+79991234570',\n      registeredAt: '2024-10-19'\n    }, {\n      name: 'Ольга',\n      email: 'olga@mail.com',\n      phone: '+79991234571',\n      registeredAt: '2024-10-20'\n    }, {\n      name: 'Сергей',\n      email: 'sergey@mail.com',\n      phone: '+79991234572',\n      registeredAt: '2024-10-21'\n    }],\n    location: 'Кофейня \"Кофейный дом\"',\n    price: 0,\n    imageUrl: '/images/events/book-club.jpg',\n    tags: ['рукоделие', 'мастер-класс', 'бесплатно'],\n    status: 'upcoming'\n  }, {\n    id: '4',\n    title: 'Встреча с автором',\n    description: 'Встреча с известным современным писателем и обсуждение его новой книги.',\n    date: '2024-03-05',\n    displayDate: '5 марта',\n    time: '19:30',\n    maxParticipants: 25,\n    registeredUsers: [],\n    location: 'Кофейня \"Кофейный дом\"',\n    price: 300,\n    imageUrl: '/images/events/author-meeting.jpg',\n    tags: ['литература', 'встреча', 'автор'],\n    status: 'past'\n  }],\n  reviews: [{\n    id: '1',\n    authorName: 'Еремей',\n    email: 'erya@example.com',\n    text: 'Приятное уютное местечко, идеальное для любителей кофе и книг одновременно. Атмосфера здесь спокойная и располагающая к чтению или работе над проектами. Бариста внимательные, готовят вкусный капучино и латте. Единственный минус — немного тесновато внутри, особенно в часы пик. Но в целом рекомендую!',\n    rating: 5,\n    createdAt: '2024-01-15',\n    status: 'approved',\n    isFeatured: true,\n    verified: true\n  }, {\n    id: '2',\n    authorName: 'Мирон',\n    email: 'mirol@example.com',\n    text: 'Посещаю эту кофейню регулярно, потому что обожаю атмосферу книжного магазина с запахом свежезаваренного кофе. Здесь приятно посидеть вечером с чашечкой горячего напитка и любимой книгой. Ассортимент кофе разнообразный, цены доступные. Правда, хотелось бы больше выбора десертов и выпечки. В остальном все отлично!',\n    rating: 4,\n    createdAt: '2024-01-20',\n    status: 'approved',\n    verified: true\n  }, {\n    id: '3',\n    authorName: 'Алексей',\n    email: 'eakseksei@example.com',\n    text: 'Это моя любимая кофейня в городе! Интерьер выполнен стильно и минималистично, много полок с интересными книгами, создающими особенную атмосферу. Часто проводятся встречи писателей и поэтов, литературные вечера. Напитки вкусные, порции большие. Только одно пожелание — расширить ассортимент чая. Все остальное идеально подходит для тихого отдыха и чтения.',\n    rating: 5,\n    createdAt: '2024-01-25',\n    status: 'approved',\n    isFeatured: true,\n    verified: true\n  }, {\n    id: '4',\n    authorName: 'Марина',\n    email: 'mary@example.com',\n    text: 'Кофейня с уникальным концептом, сочетающим две мои страсти — чтение и хороший кофе. Прекрасное пространство для тех, кому хочется отдохнуть от суеты города и погрузиться в мир литературы. Цены вполне приемлемые, обслуживание быстрое и вежливое. Иногда возникают проблемы с парковкой поблизости, но оно того стоит. Однозначно советую посетить хотя бы раз каждому любителю кофе и книг!',\n    rating: 5,\n    createdAt: '2024-01-30',\n    status: 'approved',\n    verified: true\n  }],\n  bookings: [],\n  contactMessages: []\n};\n\n// Utility functions\nconst utils = {\n  delay: (ms = API_CONFIG.DEFAULT_DELAY) => new Promise(resolve => setTimeout(resolve, ms)),\n  simulateNetworkError: (chance = 0.02) => {\n    if (Math.random() < chance) {\n      throw new ApiError('Сетевая ошибка. Пожалуйста, попробуйте еще раз.', ERROR_CODES.NETWORK_ERROR);\n    }\n  },\n  withTimeout: (promise, timeout = API_CONFIG.TIMEOUT) => {\n    return Promise.race([promise, new Promise((_, reject) => setTimeout(() => reject(new ApiError('Превышено время ожидания', ERROR_CODES.TIMEOUT)), timeout))]);\n  },\n  generateId: (prefix = '') => `${prefix}${Date.now()}${Math.random().toString(36).substr(2, 9)}`,\n  validateEmail: email => {\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    if (!emailRegex.test(email)) {\n      throw new ApiError('Пожалуйста, введите корректный email', ERROR_CODES.VALIDATION_ERROR);\n    }\n  },\n  validatePhone: phone => {\n    const phoneRegex = /^\\+?[78][-\\s]?\\(?\\d{3}\\)?[-\\s]?\\d{3}[-\\s]?\\d{2}[-\\s]?\\d{2}$/;\n    if (!phoneRegex.test(phone)) {\n      throw new ApiError('Пожалуйста, введите корректный номер телефона', ERROR_CODES.VALIDATION_ERROR);\n    }\n  },\n  validateRequired: (fields, data) => {\n    const missingFields = fields.filter(field => {\n      var _data$field;\n      return !((_data$field = data[field]) !== null && _data$field !== void 0 && _data$field.toString().trim());\n    });\n    if (missingFields.length > 0) {\n      throw new ApiError(`Пожалуйста, заполните все обязательные поля: ${missingFields.join(', ')}`, ERROR_CODES.VALIDATION_ERROR, {\n        missingFields\n      });\n    }\n  },\n  formatResponse: (data, message = 'Success', success = true) => ({\n    success,\n    message,\n    data,\n    timestamp: new Date().toISOString()\n  })\n};\n\n// HTTP Client\nconst httpClient = {\n  async request(endpoint, options = {}) {\n    try {\n      if (API_CONFIG.USE_MOCK_DATA) {\n        await utils.delay();\n        utils.simulateNetworkError();\n        return await this.mockRequest(endpoint, options);\n      }\n      const url = `${API_CONFIG.BASE_URL}${endpoint}`;\n      const config = {\n        headers: {\n          'Content-Type': 'application/json',\n          ...options.headers\n        },\n        ...options\n      };\n      if (config.body && typeof config.body === 'object') {\n        config.body = JSON.stringify(config.body);\n      }\n      const response = await utils.withTimeout(fetch(url, config));\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({}));\n        throw new ApiError(errorData.message || `HTTP error! status: ${response.status}`, ERROR_CODES.SERVER_ERROR, {\n          status: response.status,\n          ...errorData\n        });\n      }\n      return await response.json();\n    } catch (error) {\n      if (error instanceof ApiError) throw error;\n      throw new ApiError(error.message || 'Произошла непредвиденная ошибка', ERROR_CODES.NETWORK_ERROR, {\n        originalError: error.message\n      });\n    }\n  },\n  async mockRequest(endpoint, options = {}) {\n    const method = options.method || 'GET';\n    const body = options.body || {};\n\n    // Mock handlers\n    const handlers = {\n      // Menu endpoints\n      'GET /menu': () => utils.formatResponse(mockData.menuItems, 'Menu items fetched successfully'),\n      'GET /menu/:category': ({\n        category\n      }) => {\n        const items = mockData.menuItems.filter(item => item.category === category && item.available);\n        return utils.formatResponse(items, `${category} menu items fetched successfully`);\n      },\n      'GET /menu/item/:id': ({\n        id\n      }) => {\n        const item = mockData.menuItems.find(item => item.id === id && item.available);\n        if (!item) throw new ApiError('Элемент меню не найден', ERROR_CODES.NOT_FOUND);\n        return utils.formatResponse(item, 'Menu item fetched successfully');\n      },\n      // Events endpoints\n      'GET /events': () => utils.formatResponse(mockData.events, 'Events fetched successfully'),\n      'GET /events/:id': ({\n        id\n      }) => {\n        const event = mockData.events.find(event => event.id === id);\n        if (!event) throw new ApiError('Мероприятие не найдено', ERROR_CODES.NOT_FOUND);\n        return utils.formatResponse(event, 'Event fetched successfully');\n      },\n      'GET /events/upcoming': () => {\n        const today = new Date().toISOString().split('T')[0];\n        const upcomingEvents = mockData.events.filter(event => event.date >= today);\n        return utils.formatResponse(upcomingEvents, 'Upcoming events fetched successfully');\n      },\n      'POST /events/register': data => {\n        const {\n          eventId,\n          name,\n          email,\n          phone\n        } = data;\n        utils.validateRequired(['name', 'email', 'phone'], {\n          name,\n          email,\n          phone\n        });\n        utils.validateEmail(email);\n        const event = mockData.events.find(e => e.id === eventId);\n        if (!event) throw new ApiError('Мероприятие не найдено', ERROR_CODES.NOT_FOUND);\n        if (event.registeredUsers.length >= event.maxParticipants) {\n          throw new ApiError('К сожалению, все места на это мероприятие уже заняты', ERROR_CODES.CONFLICT);\n        }\n        const isAlreadyRegistered = event.registeredUsers.some(user => user.email === email);\n        if (isAlreadyRegistered) {\n          throw new ApiError('Вы уже зарегистрированы на это мероприятие', ERROR_CODES.CONFLICT);\n        }\n        event.registeredUsers.push({\n          name,\n          email,\n          phone,\n          registeredAt: new Date().toISOString()\n        });\n        return utils.formatResponse({\n          participantsCount: event.registeredUsers.length,\n          availableSpots: event.maxParticipants - event.registeredUsers.length,\n          eventTitle: event.title\n        }, 'Регистрация на мероприятие прошла успешно!');\n      },\n      // Reviews endpoints\n      'GET /reviews': () => {\n        const approvedReviews = mockData.reviews.filter(review => review.status === 'approved');\n        return utils.formatResponse(approvedReviews, 'Reviews fetched successfully');\n      },\n      'GET /reviews/featured': () => {\n        const featuredReviews = mockData.reviews.filter(review => review.isFeatured && review.status === 'approved');\n        return utils.formatResponse(featuredReviews, 'Featured reviews fetched successfully');\n      },\n      'POST /reviews': data => {\n        const {\n          authorName,\n          email,\n          text,\n          rating\n        } = data;\n        utils.validateRequired(['authorName', 'email', 'text', 'rating'], data);\n        utils.validateEmail(email);\n        if (rating < 1 || rating > 5) {\n          throw new ApiError('Рейтинг должен быть от 1 до 5', ERROR_CODES.VALIDATION_ERROR);\n        }\n        const newReview = {\n          id: utils.generateId('RV'),\n          authorName,\n          email,\n          text,\n          rating,\n          createdAt: new Date().toISOString().split('T')[0],\n          status: 'pending',\n          verified: false\n        };\n        mockData.reviews.push(newReview);\n        return utils.formatResponse(newReview, 'Отзыв отправлен на модерацию. Спасибо за ваш отзыв!');\n      },\n      // Bookings endpoints\n      'GET /bookings': () => utils.formatResponse(mockData.bookings, 'Bookings fetched successfully'),\n      'POST /bookings': data => {\n        const {\n          name,\n          email,\n          phone,\n          date,\n          time,\n          guests,\n          notes\n        } = data;\n        utils.validateRequired(['name', 'email', 'phone', 'date', 'time', 'guests'], data);\n        utils.validateEmail(email);\n        utils.validatePhone(phone);\n        const newBooking = {\n          id: utils.generateId('BK'),\n          name,\n          email,\n          phone,\n          date,\n          time,\n          guests: parseInt(guests),\n          notes,\n          status: 'confirmed',\n          bookingCode: `BK-${Math.random().toString(36).substr(2, 8).toUpperCase()}`,\n          createdAt: new Date().toISOString(),\n          updatedAt: new Date().toISOString()\n        };\n        mockData.bookings.push(newBooking);\n        return utils.formatResponse(newBooking, 'Бронирование подтверждено! Мы отправили подтверждение на вашу почту.');\n      },\n      'GET /bookings/availability': data => {\n        // Используем деструктуризацию для явного использования параметров\n        const {\n          date,\n          time,\n          guests\n        } = data;\n\n        // Используем параметры в логике\n        const dateObj = new Date(date);\n        const isWeekend = dateObj.getDay() === 0 || dateObj.getDay() === 6;\n        const isPeakTime = time >= '18:00' && time <= '21:00';\n        let availabilityChance = 0.7; // Базовый шанс доступности\n\n        // Учитываем факторы\n        if (isWeekend) availabilityChance -= 0.2;\n        if (isPeakTime) availabilityChance -= 0.3;\n        if (guests > 4) availabilityChance -= 0.2;\n        const isAvailable = Math.random() < Math.max(availabilityChance, 0.1);\n        return utils.formatResponse({\n          isAvailable,\n          message: isAvailable ? 'Столик доступен для бронирования' : 'На это время нет свободных столиков. Пожалуйста, выберите другое время.',\n          suggestedTimes: isAvailable ? [] : ['18:00', '19:30', '20:00'],\n          availableTables: isAvailable ? Math.floor(Math.random() * 5) + 1 : 0,\n          factors: {\n            isWeekend,\n            isPeakTime,\n            partySize: guests\n          }\n        }, 'Availability checked successfully');\n      },\n      // Contacts endpoints\n      'GET /contacts': () => utils.formatResponse({\n        address: 'ул. Примерная, д. 123, Москва',\n        phone: '+7 (495) 123-45-67',\n        email: 'info@bestbookscafe.ru',\n        schedule: [{\n          days: 'Пн-Пт',\n          hours: '08:00-22:00'\n        }, {\n          days: 'Сб-Вс',\n          hours: '09:00-23:00'\n        }],\n        social: {\n          vk: 'https://vk.com/bestbookscafe',\n          telegram: 'https://t.me/bestbookscafe',\n          instagram: 'https://instagram.com/bestbookscafe'\n        }\n      }, 'Contact info fetched successfully'),\n      'POST /contacts': data => {\n        const {\n          name,\n          email,\n          message\n        } = data;\n        utils.validateRequired(['name', 'email', 'message'], data);\n        utils.validateEmail(email);\n        const newMessage = {\n          id: utils.generateId('MSG'),\n          name,\n          email,\n          message,\n          createdAt: new Date().toISOString(),\n          status: 'new'\n        };\n        mockData.contactMessages.push(newMessage);\n        return utils.formatResponse(null, 'Сообщение успешно отправлено! Мы ответим вам в ближайшее время.');\n      }\n    };\n\n    // Find matching handler\n    for (const [pattern, handler] of Object.entries(handlers)) {\n      const [patternMethod, patternPath] = pattern.split(' ');\n      const pathParams = this.matchPath(patternPath, endpoint);\n      if (patternMethod === method && pathParams) {\n        return handler({\n          ...pathParams,\n          ...body\n        });\n      }\n    }\n    throw new ApiError(`Маршрут не найден: ${method} ${endpoint}`, ERROR_CODES.NOT_FOUND);\n  },\n  matchPath(pattern, path) {\n    const patternParts = pattern.split('/');\n    const pathParts = path.split('/');\n    if (patternParts.length !== pathParts.length) return null;\n    const params = {};\n    for (let i = 0; i < patternParts.length; i++) {\n      if (patternParts[i].startsWith(':')) {\n        const paramName = patternParts[i].slice(1);\n        params[paramName] = pathParts[i];\n      } else if (patternParts[i] !== pathParts[i]) {\n        return null;\n      }\n    }\n    return params;\n  }\n};\n\n// API Service functions\nexport const fetchEvents = async () => {\n  const response = await httpClient.request('/events');\n  return response.data;\n};\nexport const fetchEvent = async id => {\n  const response = await httpClient.request(`/events/${id}`);\n  return response.data;\n};\nexport const fetchUpcomingEvents = async () => {\n  const response = await httpClient.request('/events/upcoming');\n  return response.data;\n};\nexport const registerForEvent = async (eventId, registrationData) => {\n  const response = await httpClient.request('/events/register', {\n    method: 'POST',\n    body: {\n      eventId,\n      ...registrationData\n    }\n  });\n  return response;\n};\nexport const fetchMenu = async () => {\n  const response = await httpClient.request('/menu');\n  return response.data;\n};\nexport const fetchMenuByCategory = async category => {\n  const response = await httpClient.request(`/menu/${category}`);\n  return response.data;\n};\nexport const fetchMenuItem = async id => {\n  const response = await httpClient.request(`/menu/item/${id}`);\n  return response.data;\n};\nexport const createBooking = async bookingData => {\n  const response = await httpClient.request('/bookings', {\n    method: 'POST',\n    body: bookingData\n  });\n  return response;\n};\nexport const fetchBookings = async () => {\n  const response = await httpClient.request('/bookings');\n  return response.data;\n};\nexport const checkAvailability = async availabilityData => {\n  const response = await httpClient.request('/bookings/availability', {\n    method: 'GET',\n    body: availabilityData\n  });\n  return response.data;\n};\nexport const fetchReviews = async () => {\n  const response = await httpClient.request('/reviews');\n  return response.data;\n};\nexport const fetchFeaturedReviews = async () => {\n  const response = await httpClient.request('/reviews/featured');\n  return response.data;\n};\nexport const createReview = async reviewData => {\n  const response = await httpClient.request('/reviews', {\n    method: 'POST',\n    body: reviewData\n  });\n  return response;\n};\nexport const fetchContacts = async () => {\n  const response = await httpClient.request('/contacts');\n  return response.data;\n};\nexport const sendContactMessage = async messageData => {\n  const response = await httpClient.request('/contacts', {\n    method: 'POST',\n    body: messageData\n  });\n  return response;\n};\n\n// Admin functions (for future use)\nexport const updateBookingStatus = async (bookingId, status) => {\n  const response = await httpClient.request(`/bookings/${bookingId}`, {\n    method: 'PATCH',\n    body: {\n      status\n    }\n  });\n  return response;\n};\nexport const updateReviewStatus = async (reviewId, status) => {\n  const response = await httpClient.request(`/reviews/${reviewId}`, {\n    method: 'PATCH',\n    body: {\n      status\n    }\n  });\n  return response;\n};\n\n// Export API instance for default imports\nconst api = {\n  // Events\n  fetchEvents,\n  fetchEvent,\n  fetchUpcomingEvents,\n  registerForEvent,\n  // Menu\n  fetchMenu,\n  fetchMenuByCategory,\n  fetchMenuItem,\n  // Bookings\n  createBooking,\n  fetchBookings,\n  checkAvailability,\n  updateBookingStatus,\n  // Reviews\n  fetchReviews,\n  fetchFeaturedReviews,\n  createReview,\n  updateReviewStatus,\n  // Contacts\n  fetchContacts,\n  sendContactMessage,\n  // Utility\n  isUsingMockData: () => API_CONFIG.USE_MOCK_DATA,\n  getBaseUrl: () => API_CONFIG.BASE_URL\n};\nexport default api;","map":{"version":3,"names":["API_CONFIG","BASE_URL","process","env","REACT_APP_API_URL","USE_MOCK_DATA","REACT_APP_USE_MOCK_DATA","NODE_ENV","DEFAULT_DELAY","TIMEOUT","ERROR_CODES","NETWORK_ERROR","VALIDATION_ERROR","NOT_FOUND","CONFLICT","SERVER_ERROR","ApiError","Error","constructor","message","code","details","name","timestamp","Date","toISOString","mockData","menuItems","id","description","price","category","isBestseller","allergens","imageUrl","nutritionalInfo","calories","protein","carbs","fat","available","isVegan","author","events","title","date","displayDate","time","maxParticipants","registeredUsers","email","phone","registeredAt","location","tags","status","reviews","authorName","text","rating","createdAt","isFeatured","verified","bookings","contactMessages","utils","delay","ms","Promise","resolve","setTimeout","simulateNetworkError","chance","Math","random","withTimeout","promise","timeout","race","_","reject","generateId","prefix","now","toString","substr","validateEmail","emailRegex","test","validatePhone","phoneRegex","validateRequired","fields","data","missingFields","filter","field","_data$field","trim","length","join","formatResponse","success","httpClient","request","endpoint","options","mockRequest","url","config","headers","body","JSON","stringify","response","fetch","ok","errorData","json","catch","error","originalError","method","handlers","GET /menu","GET /menu/:category","items","item","GET /menu/item/:id","find","GET /events","GET /events/:id","event","GET /events/upcoming","today","split","upcomingEvents","eventId","e","isAlreadyRegistered","some","user","push","participantsCount","availableSpots","eventTitle","GET /reviews","approvedReviews","review","GET /reviews/featured","featuredReviews","newReview","GET /bookings","guests","notes","newBooking","parseInt","bookingCode","toUpperCase","updatedAt","dateObj","isWeekend","getDay","isPeakTime","availabilityChance","isAvailable","max","suggestedTimes","availableTables","floor","factors","partySize","GET /contacts","address","schedule","days","hours","social","vk","telegram","instagram","newMessage","pattern","handler","Object","entries","patternMethod","patternPath","pathParams","matchPath","path","patternParts","pathParts","params","i","startsWith","paramName","slice","fetchEvents","fetchEvent","fetchUpcomingEvents","registerForEvent","registrationData","fetchMenu","fetchMenuByCategory","fetchMenuItem","createBooking","bookingData","fetchBookings","checkAvailability","availabilityData","fetchReviews","fetchFeaturedReviews","createReview","reviewData","fetchContacts","sendContactMessage","messageData","updateBookingStatus","bookingId","updateReviewStatus","reviewId","api","isUsingMockData","getBaseUrl"],"sources":["C:/Users/user/Desktop/pm_09/pm009/frontend/src/api.js"],"sourcesContent":["// services/api.js\r\n\r\n/**\r\n * Enhanced API Service for Best Books Cafe\r\n * Supports both mock data and real backend with smooth switching\r\n */\r\n\r\n// Configuration\r\nconst API_CONFIG = {\r\n  BASE_URL: process.env.REACT_APP_API_URL || 'http://localhost:5000/api',\r\n  USE_MOCK_DATA: process.env.REACT_APP_USE_MOCK_DATA === 'true' || process.env.NODE_ENV === 'development',\r\n  DEFAULT_DELAY: 500,\r\n  TIMEOUT: 10000,\r\n};\r\n\r\n// Error types\r\nconst ERROR_CODES = {\r\n  NETWORK_ERROR: 'NETWORK_ERROR',\r\n  VALIDATION_ERROR: 'VALIDATION_ERROR',\r\n  NOT_FOUND: 'NOT_FOUND',\r\n  CONFLICT: 'CONFLICT',\r\n  SERVER_ERROR: 'SERVER_ERROR',\r\n  TIMEOUT: 'TIMEOUT',\r\n};\r\n\r\n// Custom API Error class\r\nclass ApiError extends Error {\r\n  constructor(message, code = ERROR_CODES.SERVER_ERROR, details = null) {\r\n    super(message);\r\n    this.name = 'ApiError';\r\n    this.code = code;\r\n    this.details = details;\r\n    this.timestamp = new Date().toISOString();\r\n  }\r\n}\r\n\r\n// Enhanced mock data\r\nconst mockData = {\r\n  menuItems: [\r\n    {\r\n      id: '1',\r\n      name: 'Эспрессо',\r\n      description: 'Классический крепкий кофе из отборных арабских зерен',\r\n      price: 180,\r\n      category: 'coffee',\r\n      isBestseller: true,\r\n      allergens: 'кофеин',\r\n      imageUrl: '/images/coffee/espresso.jpg',\r\n      nutritionalInfo: { calories: 5, protein: 0, carbs: 1, fat: 0 },\r\n      available: true\r\n    },\r\n    {\r\n      id: '2',\r\n      name: 'Капучино',\r\n      description: 'Нежный кофе с молочной пенкой и рисунком на поверхности',\r\n      price: 220,\r\n      category: 'coffee',\r\n      isBestseller: true,\r\n      imageUrl: '/images/coffee/cappuccino.jpg',\r\n      nutritionalInfo: { calories: 120, protein: 8, carbs: 12, fat: 4 },\r\n      available: true\r\n    },\r\n    {\r\n      id: '3',\r\n      name: 'Латте с сиропом',\r\n      description: 'Кофе с молоком и выбором сиропа (ваниль, карамель, клен)',\r\n      price: 250,\r\n      category: 'coffee',\r\n      imageUrl: '/images/coffee/latte.jpg',\r\n      nutritionalInfo: { calories: 180, protein: 9, carbs: 25, fat: 6 },\r\n      available: true\r\n    },\r\n    {\r\n      id: '4',\r\n      name: 'Американо',\r\n      description: 'Черный кофе с добавлением горячей воды',\r\n      price: 160,\r\n      category: 'coffee',\r\n      imageUrl: '/images/coffee/americano.jpg',\r\n      nutritionalInfo: { calories: 10, protein: 0, carbs: 2, fat: 0 },\r\n      available: true\r\n    },\r\n    {\r\n      id: '5',\r\n      name: 'Раф кофе',\r\n      description: 'Нежный кофейный напиток со сливками и ванилью',\r\n      price: 280,\r\n      category: 'coffee',\r\n      isBestseller: true,\r\n      imageUrl: '/images/coffee/raf.jpg',\r\n      nutritionalInfo: { calories: 210, protein: 4, carbs: 18, fat: 14 },\r\n      available: true\r\n    },\r\n    {\r\n      id: '6',\r\n      name: 'Тирамису',\r\n      description: 'Классический итальянский десерт с кофейной пропиткой',\r\n      price: 280,\r\n      category: 'desserts',\r\n      isBestseller: true,\r\n      allergens: 'глютен, лактоза',\r\n      imageUrl: '/images/desserts/tiramisu.jpg',\r\n      nutritionalInfo: { calories: 320, protein: 8, carbs: 45, fat: 12 },\r\n      available: true\r\n    },\r\n    {\r\n      id: '7',\r\n      name: 'Чизкейк Нью-Йорк',\r\n      description: 'Нежный чизкейк с ягодным соусом',\r\n      price: 260,\r\n      category: 'desserts',\r\n      imageUrl: '/images/desserts/cheesecake.jpg',\r\n      nutritionalInfo: { calories: 380, protein: 9, carbs: 35, fat: 22 },\r\n      available: true\r\n    },\r\n    {\r\n      id: '8',\r\n      name: 'Веганский брауни',\r\n      description: 'Шоколадный брауни без продуктов животного происхождения',\r\n      price: 200,\r\n      category: 'desserts',\r\n      isVegan: true,\r\n      imageUrl: '/images/desserts/brownie.jpg',\r\n      nutritionalInfo: { calories: 280, protein: 4, carbs: 38, fat: 12 },\r\n      available: true\r\n    },\r\n    {\r\n      id: '9',\r\n      name: 'Морковный торт',\r\n      description: 'Пряный торт с морковью и грецкими орехами',\r\n      price: 240,\r\n      category: 'desserts',\r\n      imageUrl: '/images/desserts/carrot-cake.jpg',\r\n      nutritionalInfo: { calories: 310, protein: 5, carbs: 42, fat: 14 },\r\n      available: true\r\n    },\r\n    {\r\n      id: '10',\r\n      name: 'Английский завтрак',\r\n      description: 'Яичница, бекон, фасоль, грибы и тосты',\r\n      price: 350,\r\n      category: 'breakfast',\r\n      allergens: 'глютен, лактоза, яйца',\r\n      imageUrl: '/images/breakfast/english.jpg',\r\n      nutritionalInfo: { calories: 520, protein: 25, carbs: 45, fat: 28 },\r\n      available: true\r\n    },\r\n    {\r\n      id: '11',\r\n      name: 'Сырники',\r\n      description: 'Домашние сырники со сметаной и ягодным джемом',\r\n      price: 280,\r\n      category: 'breakfast',\r\n      isBestseller: true,\r\n      imageUrl: '/images/breakfast/syrniki.jpg',\r\n      nutritionalInfo: { calories: 380, protein: 18, carbs: 35, fat: 16 },\r\n      available: true\r\n    },\r\n    {\r\n      id: '12',\r\n      name: 'Овсяная каша',\r\n      description: 'Каша с ягодами, орехами и медом',\r\n      price: 220,\r\n      category: 'breakfast',\r\n      isVegan: true,\r\n      imageUrl: '/images/breakfast/oatmeal.jpg',\r\n      nutritionalInfo: { calories: 280, protein: 8, carbs: 45, fat: 9 },\r\n      available: true\r\n    },\r\n    {\r\n      id: '13',\r\n      name: '1984',\r\n      description: 'Джордж Оруэлл - антиутопия о тоталитарном обществе',\r\n      price: 450,\r\n      category: 'books',\r\n      author: 'Джордж Оруэлл',\r\n      isBestseller: true,\r\n      imageUrl: '/images/books/1984.jpg',\r\n      available: true\r\n    },\r\n    {\r\n      id: '14',\r\n      name: 'Мастер и Маргарита',\r\n      description: 'Михаил Булгаков - мистический роман о добре и зле',\r\n      price: 420,\r\n      category: 'books',\r\n      author: 'Михаил Булгаков',\r\n      isBestseller: true,\r\n      imageUrl: '/images/books/master-margarita.jpg',\r\n      available: true\r\n    },\r\n    {\r\n      id: '15',\r\n      name: 'Маленький принц',\r\n      description: 'Антуан де Сент-Экзюпери - философская сказка для взрослых и детей',\r\n      price: 380,\r\n      category: 'books',\r\n      author: 'Антуан де Сент-Экзюпери',\r\n      imageUrl: '/images/books/little-prince.jpg',\r\n      available: true\r\n    },\r\n    {\r\n      id: '16',\r\n      name: 'Преступление и наказание',\r\n      description: 'Федор Достоевский - психологический роман о преступлении и морали',\r\n      price: 400,\r\n      category: 'books',\r\n      author: 'Федор Достоевский',\r\n      imageUrl: '/images/books/crime-punishment.jpg',\r\n      available: true\r\n    }\r\n  ],\r\n\r\n  events: [\r\n    {\r\n      id: '1',\r\n      title: 'Творческое занятие «Создание книжного амулета»',\r\n      description: 'Создать оригинальный оберег из бумаги своими руками',\r\n      date: '2024-11-04',\r\n      displayDate: '4 ноября',\r\n      time: '12:00',\r\n      maxParticipants: 30,\r\n      registeredUsers: [\r\n        { name: 'Анна', email: 'anna@mail.com', phone: '+79991234567', registeredAt: '2024-10-20' },\r\n        { name: 'Иван', email: 'ivan@mail.com', phone: '+79991234568', registeredAt: '2024-10-21' }\r\n      ],\r\n      location: 'Кофейня \"Кофейный дом\"',\r\n      price: 0,\r\n      imageUrl: '/images/events/poetry-evening.jpg',\r\n      tags: ['творчество', 'рукоделие', 'бесплатно'],\r\n      status: 'upcoming'\r\n    },\r\n    {\r\n      id: '2',\r\n      title: '«Рисуем осеннюю историю»',\r\n      description: 'Участникам предоставляется материал для творчества',\r\n      date: '2024-11-06',\r\n      displayDate: '6 ноября',\r\n      time: '16:00',\r\n      maxParticipants: 15,\r\n      registeredUsers: [\r\n        { name: 'Мария', email: 'maria@mail.com', phone: '+79991234569', registeredAt: '2024-10-22' }\r\n      ],\r\n      location: 'Кофейня \"Кофейный дом\"',\r\n      price: 500,\r\n      imageUrl: '/images/events/latte-art.jpg',\r\n      tags: ['рисование', 'творчество'],\r\n      status: 'upcoming'\r\n    },\r\n    {\r\n      id: '3',\r\n      title: 'Мастер-класс «Волшебная шкатулка художника»',\r\n      description: 'Изготовление оригинальной шкатулки для хранения творческих сокровищ',\r\n      date: '2024-11-07',\r\n      displayDate: '7 ноября',\r\n      time: '14:00',\r\n      maxParticipants: 20,\r\n      registeredUsers: [\r\n        { name: 'Петр', email: 'petr@mail.com', phone: '+79991234570', registeredAt: '2024-10-19' },\r\n        { name: 'Ольга', email: 'olga@mail.com', phone: '+79991234571', registeredAt: '2024-10-20' },\r\n        { name: 'Сергей', email: 'sergey@mail.com', phone: '+79991234572', registeredAt: '2024-10-21' }\r\n      ],\r\n      location: 'Кофейня \"Кофейный дом\"',\r\n      price: 0,\r\n      imageUrl: '/images/events/book-club.jpg',\r\n      tags: ['рукоделие', 'мастер-класс', 'бесплатно'],\r\n      status: 'upcoming'\r\n    },\r\n    {\r\n      id: '4',\r\n      title: 'Встреча с автором',\r\n      description: 'Встреча с известным современным писателем и обсуждение его новой книги.',\r\n      date: '2024-03-05',\r\n      displayDate: '5 марта',\r\n      time: '19:30',\r\n      maxParticipants: 25,\r\n      registeredUsers: [],\r\n      location: 'Кофейня \"Кофейный дом\"',\r\n      price: 300,\r\n      imageUrl: '/images/events/author-meeting.jpg',\r\n      tags: ['литература', 'встреча', 'автор'],\r\n      status: 'past'\r\n    }\r\n  ],\r\n\r\n  reviews: [\r\n    {\r\n      id: '1',\r\n      authorName: 'Еремей',\r\n      email: 'erya@example.com',\r\n      text: 'Приятное уютное местечко, идеальное для любителей кофе и книг одновременно. Атмосфера здесь спокойная и располагающая к чтению или работе над проектами. Бариста внимательные, готовят вкусный капучино и латте. Единственный минус — немного тесновато внутри, особенно в часы пик. Но в целом рекомендую!',\r\n      rating: 5,\r\n      createdAt: '2024-01-15',\r\n      status: 'approved',\r\n      isFeatured: true,\r\n      verified: true\r\n    },\r\n    {\r\n      id: '2',\r\n      authorName: 'Мирон',\r\n      email: 'mirol@example.com',\r\n      text: 'Посещаю эту кофейню регулярно, потому что обожаю атмосферу книжного магазина с запахом свежезаваренного кофе. Здесь приятно посидеть вечером с чашечкой горячего напитка и любимой книгой. Ассортимент кофе разнообразный, цены доступные. Правда, хотелось бы больше выбора десертов и выпечки. В остальном все отлично!',\r\n      rating: 4,\r\n      createdAt: '2024-01-20',\r\n      status: 'approved',\r\n      verified: true\r\n    },\r\n    {\r\n      id: '3',\r\n      authorName: 'Алексей',\r\n      email: 'eakseksei@example.com',\r\n      text: 'Это моя любимая кофейня в городе! Интерьер выполнен стильно и минималистично, много полок с интересными книгами, создающими особенную атмосферу. Часто проводятся встречи писателей и поэтов, литературные вечера. Напитки вкусные, порции большие. Только одно пожелание — расширить ассортимент чая. Все остальное идеально подходит для тихого отдыха и чтения.',\r\n      rating: 5,\r\n      createdAt: '2024-01-25',\r\n      status: 'approved',\r\n      isFeatured: true,\r\n      verified: true\r\n    },\r\n    {\r\n      id: '4',\r\n      authorName: 'Марина',\r\n      email: 'mary@example.com',\r\n      text: 'Кофейня с уникальным концептом, сочетающим две мои страсти — чтение и хороший кофе. Прекрасное пространство для тех, кому хочется отдохнуть от суеты города и погрузиться в мир литературы. Цены вполне приемлемые, обслуживание быстрое и вежливое. Иногда возникают проблемы с парковкой поблизости, но оно того стоит. Однозначно советую посетить хотя бы раз каждому любителю кофе и книг!',\r\n      rating: 5,\r\n      createdAt: '2024-01-30',\r\n      status: 'approved',\r\n      verified: true\r\n    }\r\n  ],\r\n\r\n  bookings: [],\r\n  contactMessages: []\r\n};\r\n\r\n// Utility functions\r\nconst utils = {\r\n  delay: (ms = API_CONFIG.DEFAULT_DELAY) => \r\n    new Promise(resolve => setTimeout(resolve, ms)),\r\n\r\n  simulateNetworkError: (chance = 0.02) => {\r\n    if (Math.random() < chance) {\r\n      throw new ApiError('Сетевая ошибка. Пожалуйста, попробуйте еще раз.', ERROR_CODES.NETWORK_ERROR);\r\n    }\r\n  },\r\n\r\n  withTimeout: (promise, timeout = API_CONFIG.TIMEOUT) => {\r\n    return Promise.race([\r\n      promise,\r\n      new Promise((_, reject) => \r\n        setTimeout(() => reject(new ApiError('Превышено время ожидания', ERROR_CODES.TIMEOUT)), timeout)\r\n      )\r\n    ]);\r\n  },\r\n\r\n  generateId: (prefix = '') => \r\n    `${prefix}${Date.now()}${Math.random().toString(36).substr(2, 9)}`,\r\n\r\n  validateEmail: (email) => {\r\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n    if (!emailRegex.test(email)) {\r\n      throw new ApiError('Пожалуйста, введите корректный email', ERROR_CODES.VALIDATION_ERROR);\r\n    }\r\n  },\r\n\r\n  validatePhone: (phone) => {\r\n    const phoneRegex = /^\\+?[78][-\\s]?\\(?\\d{3}\\)?[-\\s]?\\d{3}[-\\s]?\\d{2}[-\\s]?\\d{2}$/;\r\n    if (!phoneRegex.test(phone)) {\r\n      throw new ApiError('Пожалуйста, введите корректный номер телефона', ERROR_CODES.VALIDATION_ERROR);\r\n    }\r\n  },\r\n\r\n  validateRequired: (fields, data) => {\r\n    const missingFields = fields.filter(field => !data[field]?.toString().trim());\r\n    if (missingFields.length > 0) {\r\n      throw new ApiError(\r\n        `Пожалуйста, заполните все обязательные поля: ${missingFields.join(', ')}`,\r\n        ERROR_CODES.VALIDATION_ERROR,\r\n        { missingFields }\r\n      );\r\n    }\r\n  },\r\n\r\n  formatResponse: (data, message = 'Success', success = true) => ({\r\n    success,\r\n    message,\r\n    data,\r\n    timestamp: new Date().toISOString()\r\n  })\r\n};\r\n\r\n// HTTP Client\r\nconst httpClient = {\r\n  async request(endpoint, options = {}) {\r\n    try {\r\n      if (API_CONFIG.USE_MOCK_DATA) {\r\n        await utils.delay();\r\n        utils.simulateNetworkError();\r\n        return await this.mockRequest(endpoint, options);\r\n      }\r\n\r\n      const url = `${API_CONFIG.BASE_URL}${endpoint}`;\r\n      const config = {\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          ...options.headers,\r\n        },\r\n        ...options,\r\n      };\r\n\r\n      if (config.body && typeof config.body === 'object') {\r\n        config.body = JSON.stringify(config.body);\r\n      }\r\n\r\n      const response = await utils.withTimeout(fetch(url, config));\r\n\r\n      if (!response.ok) {\r\n        const errorData = await response.json().catch(() => ({}));\r\n        throw new ApiError(\r\n          errorData.message || `HTTP error! status: ${response.status}`,\r\n          ERROR_CODES.SERVER_ERROR,\r\n          { status: response.status, ...errorData }\r\n        );\r\n      }\r\n\r\n      return await response.json();\r\n    } catch (error) {\r\n      if (error instanceof ApiError) throw error;\r\n      throw new ApiError(\r\n        error.message || 'Произошла непредвиденная ошибка',\r\n        ERROR_CODES.NETWORK_ERROR,\r\n        { originalError: error.message }\r\n      );\r\n    }\r\n  },\r\n\r\n  async mockRequest(endpoint, options = {}) {\r\n    const method = options.method || 'GET';\r\n    const body = options.body || {};\r\n\r\n    // Mock handlers\r\n    const handlers = {\r\n      // Menu endpoints\r\n      'GET /menu': () => utils.formatResponse(mockData.menuItems, 'Menu items fetched successfully'),\r\n      'GET /menu/:category': ({ category }) => {\r\n        const items = mockData.menuItems.filter(item => item.category === category && item.available);\r\n        return utils.formatResponse(items, `${category} menu items fetched successfully`);\r\n      },\r\n      'GET /menu/item/:id': ({ id }) => {\r\n        const item = mockData.menuItems.find(item => item.id === id && item.available);\r\n        if (!item) throw new ApiError('Элемент меню не найден', ERROR_CODES.NOT_FOUND);\r\n        return utils.formatResponse(item, 'Menu item fetched successfully');\r\n      },\r\n\r\n      // Events endpoints\r\n      'GET /events': () => utils.formatResponse(mockData.events, 'Events fetched successfully'),\r\n      'GET /events/:id': ({ id }) => {\r\n        const event = mockData.events.find(event => event.id === id);\r\n        if (!event) throw new ApiError('Мероприятие не найдено', ERROR_CODES.NOT_FOUND);\r\n        return utils.formatResponse(event, 'Event fetched successfully');\r\n      },\r\n      'GET /events/upcoming': () => {\r\n        const today = new Date().toISOString().split('T')[0];\r\n        const upcomingEvents = mockData.events.filter(event => event.date >= today);\r\n        return utils.formatResponse(upcomingEvents, 'Upcoming events fetched successfully');\r\n      },\r\n      'POST /events/register': (data) => {\r\n        const { eventId, name, email, phone } = data;\r\n        \r\n        utils.validateRequired(['name', 'email', 'phone'], { name, email, phone });\r\n        utils.validateEmail(email);\r\n\r\n        const event = mockData.events.find(e => e.id === eventId);\r\n        if (!event) throw new ApiError('Мероприятие не найдено', ERROR_CODES.NOT_FOUND);\r\n        if (event.registeredUsers.length >= event.maxParticipants) {\r\n          throw new ApiError('К сожалению, все места на это мероприятие уже заняты', ERROR_CODES.CONFLICT);\r\n        }\r\n\r\n        const isAlreadyRegistered = event.registeredUsers.some(user => user.email === email);\r\n        if (isAlreadyRegistered) {\r\n          throw new ApiError('Вы уже зарегистрированы на это мероприятие', ERROR_CODES.CONFLICT);\r\n        }\r\n\r\n        event.registeredUsers.push({\r\n          name, email, phone,\r\n          registeredAt: new Date().toISOString()\r\n        });\r\n\r\n        return utils.formatResponse(\r\n          {\r\n            participantsCount: event.registeredUsers.length,\r\n            availableSpots: event.maxParticipants - event.registeredUsers.length,\r\n            eventTitle: event.title\r\n          },\r\n          'Регистрация на мероприятие прошла успешно!'\r\n        );\r\n      },\r\n\r\n      // Reviews endpoints\r\n      'GET /reviews': () => {\r\n        const approvedReviews = mockData.reviews.filter(review => review.status === 'approved');\r\n        return utils.formatResponse(approvedReviews, 'Reviews fetched successfully');\r\n      },\r\n      'GET /reviews/featured': () => {\r\n        const featuredReviews = mockData.reviews.filter(review => review.isFeatured && review.status === 'approved');\r\n        return utils.formatResponse(featuredReviews, 'Featured reviews fetched successfully');\r\n      },\r\n      'POST /reviews': (data) => {\r\n        const { authorName, email, text, rating } = data;\r\n        \r\n        utils.validateRequired(['authorName', 'email', 'text', 'rating'], data);\r\n        utils.validateEmail(email);\r\n        \r\n        if (rating < 1 || rating > 5) {\r\n          throw new ApiError('Рейтинг должен быть от 1 до 5', ERROR_CODES.VALIDATION_ERROR);\r\n        }\r\n\r\n        const newReview = {\r\n          id: utils.generateId('RV'),\r\n          authorName,\r\n          email,\r\n          text,\r\n          rating,\r\n          createdAt: new Date().toISOString().split('T')[0],\r\n          status: 'pending',\r\n          verified: false\r\n        };\r\n\r\n        mockData.reviews.push(newReview);\r\n\r\n        return utils.formatResponse(\r\n          newReview,\r\n          'Отзыв отправлен на модерацию. Спасибо за ваш отзыв!'\r\n        );\r\n      },\r\n\r\n      // Bookings endpoints\r\n      'GET /bookings': () => utils.formatResponse(mockData.bookings, 'Bookings fetched successfully'),\r\n      'POST /bookings': (data) => {\r\n        const { name, email, phone, date, time, guests, notes } = data;\r\n        \r\n        utils.validateRequired(['name', 'email', 'phone', 'date', 'time', 'guests'], data);\r\n        utils.validateEmail(email);\r\n        utils.validatePhone(phone);\r\n\r\n        const newBooking = {\r\n          id: utils.generateId('BK'),\r\n          name,\r\n          email,\r\n          phone,\r\n          date,\r\n          time,\r\n          guests: parseInt(guests),\r\n          notes,\r\n          status: 'confirmed',\r\n          bookingCode: `BK-${Math.random().toString(36).substr(2, 8).toUpperCase()}`,\r\n          createdAt: new Date().toISOString(),\r\n          updatedAt: new Date().toISOString()\r\n        };\r\n\r\n        mockData.bookings.push(newBooking);\r\n\r\n        return utils.formatResponse(\r\n          newBooking,\r\n          'Бронирование подтверждено! Мы отправили подтверждение на вашу почту.'\r\n        );\r\n      },\r\n      'GET /bookings/availability': (data) => {\r\n        // Используем деструктуризацию для явного использования параметров\r\n        const { date, time, guests } = data;\r\n        \r\n        // Используем параметры в логике\r\n        const dateObj = new Date(date);\r\n        const isWeekend = dateObj.getDay() === 0 || dateObj.getDay() === 6;\r\n        const isPeakTime = time >= '18:00' && time <= '21:00';\r\n        \r\n        let availabilityChance = 0.7; // Базовый шанс доступности\r\n        \r\n        // Учитываем факторы\r\n        if (isWeekend) availabilityChance -= 0.2;\r\n        if (isPeakTime) availabilityChance -= 0.3;\r\n        if (guests > 4) availabilityChance -= 0.2;\r\n        \r\n        const isAvailable = Math.random() < Math.max(availabilityChance, 0.1);\r\n        \r\n        return utils.formatResponse({\r\n          isAvailable,\r\n          message: isAvailable \r\n            ? 'Столик доступен для бронирования' \r\n            : 'На это время нет свободных столиков. Пожалуйста, выберите другое время.',\r\n          suggestedTimes: isAvailable ? [] : ['18:00', '19:30', '20:00'],\r\n          availableTables: isAvailable ? Math.floor(Math.random() * 5) + 1 : 0,\r\n          factors: {\r\n            isWeekend,\r\n            isPeakTime,\r\n            partySize: guests\r\n          }\r\n        }, 'Availability checked successfully');\r\n      },\r\n\r\n      // Contacts endpoints\r\n      'GET /contacts': () => utils.formatResponse({\r\n        address: 'ул. Примерная, д. 123, Москва',\r\n        phone: '+7 (495) 123-45-67',\r\n        email: 'info@bestbookscafe.ru',\r\n        schedule: [\r\n          { days: 'Пн-Пт', hours: '08:00-22:00' },\r\n          { days: 'Сб-Вс', hours: '09:00-23:00' }\r\n        ],\r\n        social: {\r\n          vk: 'https://vk.com/bestbookscafe',\r\n          telegram: 'https://t.me/bestbookscafe',\r\n          instagram: 'https://instagram.com/bestbookscafe'\r\n        }\r\n      }, 'Contact info fetched successfully'),\r\n      \r\n      'POST /contacts': (data) => {\r\n        const { name, email, message } = data;\r\n        \r\n        utils.validateRequired(['name', 'email', 'message'], data);\r\n        utils.validateEmail(email);\r\n\r\n        const newMessage = {\r\n          id: utils.generateId('MSG'),\r\n          name,\r\n          email,\r\n          message,\r\n          createdAt: new Date().toISOString(),\r\n          status: 'new'\r\n        };\r\n\r\n        mockData.contactMessages.push(newMessage);\r\n\r\n        return utils.formatResponse(\r\n          null,\r\n          'Сообщение успешно отправлено! Мы ответим вам в ближайшее время.'\r\n        );\r\n      }\r\n    };\r\n\r\n    // Find matching handler\r\n    for (const [pattern, handler] of Object.entries(handlers)) {\r\n      const [patternMethod, patternPath] = pattern.split(' ');\r\n      const pathParams = this.matchPath(patternPath, endpoint);\r\n      \r\n      if (patternMethod === method && pathParams) {\r\n        return handler({ ...pathParams, ...body });\r\n      }\r\n    }\r\n\r\n    throw new ApiError(`Маршрут не найден: ${method} ${endpoint}`, ERROR_CODES.NOT_FOUND);\r\n  },\r\n\r\n  matchPath(pattern, path) {\r\n    const patternParts = pattern.split('/');\r\n    const pathParts = path.split('/');\r\n    \r\n    if (patternParts.length !== pathParts.length) return null;\r\n    \r\n    const params = {};\r\n    for (let i = 0; i < patternParts.length; i++) {\r\n      if (patternParts[i].startsWith(':')) {\r\n        const paramName = patternParts[i].slice(1);\r\n        params[paramName] = pathParts[i];\r\n      } else if (patternParts[i] !== pathParts[i]) {\r\n        return null;\r\n      }\r\n    }\r\n    return params;\r\n  }\r\n};\r\n\r\n// API Service functions\r\nexport const fetchEvents = async () => {\r\n  const response = await httpClient.request('/events');\r\n  return response.data;\r\n};\r\n\r\nexport const fetchEvent = async (id) => {\r\n  const response = await httpClient.request(`/events/${id}`);\r\n  return response.data;\r\n};\r\n\r\nexport const fetchUpcomingEvents = async () => {\r\n  const response = await httpClient.request('/events/upcoming');\r\n  return response.data;\r\n};\r\n\r\nexport const registerForEvent = async (eventId, registrationData) => {\r\n  const response = await httpClient.request('/events/register', {\r\n    method: 'POST',\r\n    body: { eventId, ...registrationData }\r\n  });\r\n  return response;\r\n};\r\n\r\nexport const fetchMenu = async () => {\r\n  const response = await httpClient.request('/menu');\r\n  return response.data;\r\n};\r\n\r\nexport const fetchMenuByCategory = async (category) => {\r\n  const response = await httpClient.request(`/menu/${category}`);\r\n  return response.data;\r\n};\r\n\r\nexport const fetchMenuItem = async (id) => {\r\n  const response = await httpClient.request(`/menu/item/${id}`);\r\n  return response.data;\r\n};\r\n\r\nexport const createBooking = async (bookingData) => {\r\n  const response = await httpClient.request('/bookings', {\r\n    method: 'POST',\r\n    body: bookingData\r\n  });\r\n  return response;\r\n};\r\n\r\nexport const fetchBookings = async () => {\r\n  const response = await httpClient.request('/bookings');\r\n  return response.data;\r\n};\r\n\r\nexport const checkAvailability = async (availabilityData) => {\r\n  const response = await httpClient.request('/bookings/availability', {\r\n    method: 'GET',\r\n    body: availabilityData\r\n  });\r\n  return response.data;\r\n};\r\n\r\nexport const fetchReviews = async () => {\r\n  const response = await httpClient.request('/reviews');\r\n  return response.data;\r\n};\r\n\r\nexport const fetchFeaturedReviews = async () => {\r\n  const response = await httpClient.request('/reviews/featured');\r\n  return response.data;\r\n};\r\n\r\nexport const createReview = async (reviewData) => {\r\n  const response = await httpClient.request('/reviews', {\r\n    method: 'POST',\r\n    body: reviewData\r\n  });\r\n  return response;\r\n};\r\n\r\nexport const fetchContacts = async () => {\r\n  const response = await httpClient.request('/contacts');\r\n  return response.data;\r\n};\r\n\r\nexport const sendContactMessage = async (messageData) => {\r\n  const response = await httpClient.request('/contacts', {\r\n    method: 'POST',\r\n    body: messageData\r\n  });\r\n  return response;\r\n};\r\n\r\n// Admin functions (for future use)\r\nexport const updateBookingStatus = async (bookingId, status) => {\r\n  const response = await httpClient.request(`/bookings/${bookingId}`, {\r\n    method: 'PATCH',\r\n    body: { status }\r\n  });\r\n  return response;\r\n};\r\n\r\nexport const updateReviewStatus = async (reviewId, status) => {\r\n  const response = await httpClient.request(`/reviews/${reviewId}`, {\r\n    method: 'PATCH',\r\n    body: { status }\r\n  });\r\n  return response;\r\n};\r\n\r\n// Export API instance for default imports\r\nconst api = {\r\n  // Events\r\n  fetchEvents,\r\n  fetchEvent,\r\n  fetchUpcomingEvents,\r\n  registerForEvent,\r\n  \r\n  // Menu\r\n  fetchMenu,\r\n  fetchMenuByCategory,\r\n  fetchMenuItem,\r\n  \r\n  // Bookings\r\n  createBooking,\r\n  fetchBookings,\r\n  checkAvailability,\r\n  updateBookingStatus,\r\n  \r\n  // Reviews\r\n  fetchReviews,\r\n  fetchFeaturedReviews,\r\n  createReview,\r\n  updateReviewStatus,\r\n  \r\n  // Contacts\r\n  fetchContacts,\r\n  sendContactMessage,\r\n  \r\n  // Utility\r\n  isUsingMockData: () => API_CONFIG.USE_MOCK_DATA,\r\n  getBaseUrl: () => API_CONFIG.BASE_URL\r\n};\r\n\r\nexport default api;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}